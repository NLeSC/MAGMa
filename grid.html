<html> 
<head> 
<link rel="stylesheet" href="ChemDoodleWeb/install/ChemDoodleWeb.css" type="text/css"> 
<link rel="stylesheet" href="ext-4.0.2a/resources/css/ext-all.css" type="text/css"> 
<script type="text/javascript" src="ext-4.0.2a/bootstrap.js"></script> 
<script type="text/javascript" src="ChemDoodleWeb/install/ChemDoodleWeb-libs.js"></script> 
<script type="text/javascript" src="ChemDoodleWeb/src/ChemDoodleWeb-unpacked.js"></script> 
<script type="text/javascript">

Ext.Loader.setConfig({
  enabled: true
});

Ext.onReady(function () {
  //ChemDoodle.default_atoms_useJMOLColors = true;
  
  Ext.define('Molecule', {
    extend:'Ext.data.Model',
    fields: [{
      name:'name', type:'string'
    },{
      name:'mol', type:'string'
    }]
  });

  var pageSize = 10;
  var store = Ext.create('Ext.data.Store', {
    storeId:'sampleStore',
    model:'Molecule',
    pageSize: pageSize,
    proxy: {
        type: 'ajax',
        url: 'data.json',
        reader: {
            type: 'json',
            root: 'rows'
        }
    },
    autoLoad: true
 });

  //Minimal
// var molcol = Ext.create('Ext.esc.ChemDoodleColumn', {
//  text: 'Molecule', dataIndex: 'mol',
//  width: 150
// });

 // Bigger
//  var molcol = Ext.create('Ext.esc.ChemDoodleColumn', {
//    text: 'Molecule', dataIndex: 'mol',
//    canvasWidth: 300, canvasHeight: 200,
//    width: 300, canvasClass: 'x-chemdoodle-cols2',
//  });

 // bigger and transformable
 var molcol = Ext.create('Ext.esc.ChemDoodleColumn', {
   text: 'Molecule', dataIndex: 'mol',
   canvasWidth: 300, canvasHeight: 200,
   width: 300,
   initCanvas:function(id, width, height, value) {
     console.log('initcanvas1',id, width, height);
     var c = new ChemDoodle.TransformCanvas(id, width, height,true);
     c.loadMolecule(ChemDoodle.readMOL(value));
   }
 });

 var grid = Ext.create('Ext.grid.Panel', {
   title: 'Chemdoodle table',
   store: store,
   columns: [
     Ext.create('Ext.grid.RowNumberer'),
     molcol,
     {text: 'Name', dataIndex: 'name', flex:1},
   ],
   pageSize: pageSize,
   dockedItems: [{
     xtype: 'pagingtoolbar',
     store: store,   // same store GridPanel is using
     dock: 'bottom',
     displayInfo: true
   }],
   height: 600,
   width: 700,
   plugins: [molcol],
   renderTo: Ext.getBody(),
 });

});
</script>
</head> 
<body> 
</body> 
</html>