language: python
python: 
  - "2.7"
before_install:
  - wget -nc http://repo.continuum.io/miniconda/Miniconda-3.5.5-Linux-x86_64.sh -O miniconda.sh
  - bash miniconda.sh -b -p conda
  - source conda/bin/activate root
  - conda update -q conda
  - conda install -c https://conda.binstar.org/rdkit rdkit=2014.09.2 boost=1.56.0
  - conda install numpy cython lxml nose coverage
  - wget -nc http://cdn.sencha.com/ext/gpl/ext-4.2.1-gpl.zip && unzip -nd web/magmaweb/static ext-4.2.1-gpl.zip
install:
  - cd job && python setup.py develop
  - python web/setup.py develop
  - cd web && npm install
before_script:
  - npm install karma-cli
  - pip install nose
script:
  - cd job && nosetests
  - cd web && nosetests 
  - cd web && karma start
sudo: false
cache:
  - web/magmaweb/static/ext-4.2.1.883
  - conda
  - web/node_modules
